
var mes = [
    {
        ava: "https://images.generated.photos/rg-8c9LCv1w3B4q2759DL66UGzYU0nHgmEpbJmB_0IE/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy8wMDky/Mzk3LmpwZw.jpg",
        name: "Jamoldinbe Ikromiddinov",
        phone: "+998950371103",
        email: "bosuvay1@gmail.com",
        address: "Hamza Metro",
        time: "9:00 PM",
        company: "Najot Ta'lim",
        text: "Hello everyone",
        date_of_onliine: "Jun 14, 2022",
        date_of_register: "Mart 11, 2021",
        priority: "high",
    },
    {
        ava: "https://images.generated.photos/rg-8c9LCv1w3B4q2759DL66UGzYU0nHgmEpbJmB_0IE/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy8wMDky/Mzk3LmpwZw.jpg",
        name: "Muhammadrizo(momam)",
        phone: "+998950138881",
        email: "momakucukcamiyovmiyov.com",
        address: "Bilmayman",
        time: "25:00 PM",
        company: "Ko'cha",
        text: "Mahud kabob",
        date_of_onliine: "December 32, 2023",
        date_of_register: "February 31, 2022",
        priority: "low",
    }, 
    {
        ava: "https://images.generated.photos/w8hm4w2LaE-8WN2Xv-5I8D5w7DipIZ4-ffm7mCKzSv4/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/MzQxNTgwLmpwZw.jpg",
        name: "Martina Odom",
        phone: "1-781-175-5843",
        email: "sed.id.risus@hotmail.edu",
        address: "Ap #694-8096 Donec Ave",
        time: "2:44 PM",
        company: "Sagittis Placerat Incorporated",
        text: "egestas blandit. Nam nulla magna, malesuada vel, convallis in,",
        date_of_onliine: "Aug 5, 2022",
        date_of_register: "Jun 2, 2015",
        priority: "normal",
    },
    {
        ava: "https://images.generated.photos/hv4mkV3xx9JXEfpVosums4tOXKyntWk1Ywue7gRQWa0/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/NTMyOTY2LmpwZw.jpg",
        name: "Martena Solomon",
        phone: "(135) 514-2662",
        email: "a.enim@protonmail.net",
        address: "902-1030 Ligula. Rd.",
        time: "12:04 PM",
        company: "Nibh Dolor Corporation",
        text: "netus et",
        date_of_onliine: "Sep 21, 2021",
        date_of_register: "Apr 8, 2020",
        priority: "normal",
    },
    {
        ava: "https://images.generated.photos/S-UhXPGAiNe-1iqQ_vBq8HH2rCKgJL3U7KR14nlDB80/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/NzIzODg1LmpwZw.jpg",
        name: "Solomon Daniel",
        phone: "(675) 491-1346",
        email: "in.nec@google.couk",
        address: "P.O. Box 836, 3281 Urna. Rd.",
        time: "8:46 PM",
        company: "At Company",
        text: "risus. In mi pede, nonummy ut, molestie in, tempus",
        date_of_onliine: "Dec 11, 2021",
        date_of_register: "Jun 12, 2021",
        priority: "normal",
    },
    {
        ava: "https://images.generated.photos/Unr8QnNpAL9b59ZwRkrDuB0L7RfaiuE_WVAJK-LpYz8/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/NTg5NDA4LmpwZw.jpg",
        name: "Jared Fowler",
        phone: "1-757-183-5896",
        email: "sed.diam@google.com",
        address: "1650 At St.",
        time: "12:43 AM",
        company: "Diam Lorem Industries",
        text: "Phasellus ornare. Fusce mollis. Duis sit amet",
        date_of_onliine: "Dec 29, 2022",
        date_of_register: "Aug 3, 2021",
        priority: "normal",
    },
    {
        ava: "https://images.generated.photos/Unr8QnNpAL9b59ZwRkrDuB0L7RfaiuE_WVAJK-LpYz8/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/NTg5NDA4LmpwZw.jpg",
        name: "Sebastian Williams",
        phone: "1-617-233-8442",
        email: "penatibus.et@outlook.org",
        address: "Ap #232-8495 Turpis Rd.",
        time: "9:01 AM",
        company: "Gravida Sit LLP",
        text: "Suspendisse sagittis. Nullam vitae",
        date_of_onliine: "Dec 4, 2021",
        date_of_register: "Apr 20, 2019",
        priority: "low",
    },
    {
        ava: "https://images.generated.photos/jzWrBExuMyrSgmhGyRZ_HTKZgDpozkSzvfNt2Q8oXUw/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/MTk2NjgzLmpwZw.jpg",
        name: "Ramona Bush",
        phone: "(264) 851-7203",
        email: "dignissim.pharetra@outlook.org",
        address: "P.O. Box 124, 3805 Sit St.",
        time: "7:42 PM",
        company: "Sed Et LLC",
        text: "cursus, diam at pretium aliquet, metus urna",
        date_of_onliine: "Jun 19, 2021",
        date_of_register: "Jun 5, 2015",
        priority: "low",
    },
    {
        ava: "https://images.generated.photos/hcyTjG2OuLrCoKnHXv4bbagQrydPREgBkPQ3BoaX0Zw/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/MTkxNjkzLmpwZw.jpg",
        name: "Lucy Hale",
        phone: "1-104-723-5818",
        email: "gravida@hotmail.net",
        address: "Ap #151-7896 Sed Street",
        time: "6:54 PM",
        company: "Leo Elementum Inc.",
        text: "urna. Nunc quis arcu vel quam",
        date_of_onliine: "Oct 8, 2022",
        date_of_register: "Jul 8, 2017",
        priority: "high",
    },
    {
        ava: "https://images.generated.photos/fg8tuoOAJYl7bhYP33UzcmyrsA6YYrkYyEE1i6v_PHI/rs:fit:256:256/czM6Ly9pY29uczgu/Z3Bob3Rvcy1wcm9k/LnBob3Rvcy92M18w/MjcyNDM3LmpwZw.jpg",
        name: "Kessie Dudley",
        phone: "1-128-888-5883",
        email: "ipsum.primis@aol.net",
        address: "Ap #960-348 Vivamus Avenue",
        time: "8:10 PM",
        company: "Auctor Corporation",
        text: "dictum cursus. Nunc mauris elit, dictum eu, eleifend nec,",
        date_of_onliine: "Jun 14, 2022",
        date_of_register: "Mar 5, 2021",
        priority: "low",
    },
];

const input = document.getElementById('input')
const centreEl = document.querySelector('.details')
const sort = document.getElementById('sort')
const filter = document.getElementById('filter')


input.addEventListener('keyup', () => {
    let search = []
    mes.map((a) => {
        let b = a.name
        let v = b.toLowerCase()
        if (a.text.includes(input.value) || v.includes(input.value)) search.push(a)
    })
    creatEl(centreEl, search)
})
sort.addEventListener('click', () => {
    let sorted = mes.sort((a, b) => a.name.localeCompare(b.name))
    creatEl(centreEl, sorted)
})
filter.addEventListener('change', () => {
    let filtered = mes.filter((a) => a.priority == filter.value)
    creatEl(centreEl, filtered)
})

function creatEl(list, mes) {
    centreEl.innerHTML = ' '
    mes.forEach((e) => {

        const divEl = document.createElement('div')
        divEl.className = 'customers'


        const divCard1 = document.createElement('div')
        divCard1.className = 'card1'
        const imgEL = document.createElement('img')
        imgEL.className = 'card_img'
        imgEL.src = e.ava

        const divEl2 = document.createElement('div')
        divEl2.className = 'div'

        const title1 = document.createElement('h4')
        title1.textContent = e.name

        const span1 = document.createElement('h5')
        span1.textContent = e.time


        const divCard2 = document.createElement('div')
        divCard2.className = 'card2'

        const title2 = document.createElement('h4')
        title2.textContent = e.email

        const span2 = document.createElement('p')
        span2.textContent = e.text

        const divCard3 = document.createElement('div')
        divCard3.className = 'card3'

        const title3 = document.createElement('h4')
        title3.textContent = e.text
        const span3 = document.createElement('p')
        span3.textContent = e.date_of_register

        const progres = document.createElement('span')
        progres.className = 'high'
        progres.textContent = e.priority
        if (e.priority == 'high') {
            progres.style.background = 'blue'
            progres.style.width = '80px'
            progres.style.textAlign = 'center'
        } else if (e.priority == 'normal') {
            progres.style.background = 'yellow'
            progres.style.color = 'black'
            progres.style.width = '80px'
            progres.style.textAlign = 'center'
        }else{
            progres.style.width = '80px'
            progres.style.textAlign = 'center'
        }
        list.append(divEl)
        divEl.append(divCard1, divCard2, divCard3, progres)
        divCard1.append(imgEL, divEl2)
        divEl2.append(span1, title1)
        divCard2.append(span2, title2)
        divCard3.append(span3, title3)


    })
}
creatEl(centreEl, mes)


const logout = document.querySelector('.logout')
logout.style.borderRadius = '50px'
logout.style.background = 'red'
logout.style.color = 'white'
if(!window.localStorage.getItem('token')){
    window.location.replace('/admin.html')
}

logout.addEventListener('click', ()=>{
    window.location.replace('/admin.html')
    window.localStorage.clear()
})


